# BloomBeasts - Meta Horizon Deployment

This folder contains the Meta Horizon Worlds deployment of BloomBeasts.

## Files

- **`src/BloomBeasts-Game.ts`** - Main game UI component for Meta Horizon Custom UI
- **`deploy.js`** - Deployment script that copies files to Meta Horizon
- **Reference: `../../dist/BloomBeasts-GameEngine-Standalone.ts`** - Game engine bundle (generated by build)

## Deployment

### Quick Deploy

```bash
npm run deploy
```

This will:
1. Build the standalone game engine bundle
2. Copy both `BloomBeasts-GameEngine-Standalone.ts` and `BloomBeasts-Game.ts` to your Meta Horizon scripts folder

### Manual Deployment

If you need to deploy manually:

1. Build the bundle:
   ```bash
   npm run build
   ```

2. Copy these files to your Meta Horizon scripts folder:
   - `dist/BloomBeasts-GameEngine-Standalone.ts`
   - `deployments/horizon/src/BloomBeasts-Game.ts`

   Default location: `%LOCALAPPDATA%\..\LocalLow\Meta\Horizon Worlds\<WORLD_ID>\scripts\`

### Updating World ID

If deploying to a different Meta Horizon world, update the world ID in `deploy.js`:

```javascript
const HORIZON_SCRIPTS_PATH = path.join(
  process.env.LOCALAPPDATA || process.env.APPDATA,
  '../LocalLow/Meta/Horizon Worlds/YOUR_WORLD_ID/scripts'
);
```

## Using in Meta Horizon

1. Run `npm run deploy` to copy files to Meta Horizon
2. In Meta Horizon World Builder, the files will be available in your scripts folder
3. Attach `BloomBeastsUI` component to an entity in your world
4. The game will initialize automatically when the world loads

## Architecture

- **BloomBeasts-GameEngine-Standalone.ts**: Contains the entire game engine in a namespace
  - All game logic, card definitions, combat system, etc.
  - Exported as `BloomBeasts` namespace with shared styles (COLORS, DIMENSIONS, LAYOUTS, etc.)

- **BloomBeasts-Game.ts**: Horizon-specific UI implementation
  - Implements `PlatformCallbacks` interface
  - Uses Horizon Custom UI components (View, Text, Pressable, etc.)
  - Bridges game engine with Horizon's rendering system

## Shared Styles

Both platforms (Web and Horizon) use the same styling constants from the BloomBeasts namespace:

- `BloomBeasts.COLORS` - Color palette
- `BloomBeasts.DIMENSIONS` - Font sizes, spacing, component dimensions
- `BloomBeasts.GAPS` - Gap spacing between elements
- `BloomBeasts.LAYOUTS` - Flexbox layout definitions
- `BloomBeasts.BUTTON_STYLES` - Pre-configured button styles
- `BloomBeasts.TEXT_STYLES` - Pre-configured text styles
- `BloomBeasts.CARD_STYLES` - Pre-configured card styles
- `BloomBeasts.DIALOG_STYLES` - Pre-configured dialog styles

## Development

When making changes to the game engine or shared styles:

1. Edit files in the main `bloombeasts/` or `shared/` directories
2. Run `npm run deploy` to rebuild and deploy
3. Reload your Meta Horizon world to see changes

## Troubleshooting

**"File not found" errors**: Make sure both files are in the same Meta Horizon scripts folder. Run `npm run deploy` to copy them automatically.

**Type errors**: Meta Horizon has a limited TypeScript environment. The bundle only uses basic console methods (log, warn, error) for compatibility.

**Path issues**: Verify your world ID in `deploy.js` matches your Meta Horizon world folder.
